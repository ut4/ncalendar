/*
 nullcalendar
 Released under BSD-3-Clause license.
 almond 0.3.3 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/almond/LICENSE
*/
(function(root,factory){if(typeof define==="function"&&define.amd)define([],factory);else root.nullcalendar=factory()})(this,function(){var requirejs,require,define;(function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,
starI,i,j,part,normalizedBaseParts,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name){name=name.split("/");lastIndex=name.length-1;if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex]))name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"");if(name[0].charAt(0)==="."&&baseParts){normalizedBaseParts=baseParts.slice(0,baseParts.length-1);name=normalizedBaseParts.concat(name)}for(i=0;i<name.length;i++){part=name[i];if(part==="."){name.splice(i,1);i-=1}else if(part===
"..")if(i===0||i===1&&name[2]===".."||name[i-1]==="..")continue;else if(i>0){name.splice(i-1,2);i-=2}}name=name.join("/")}if((baseParts||starMap)&&map){nameParts=name.split("/");for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts)for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join("/")];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;foundI=i;break}}}if(foundMap)break;if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=
starMap[nameSegment];starI=i}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/")}}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);if(typeof args[0]!=="string"&&args.length===1)args.push(null);return req.apply(undef,args.concat([relName,forceSync]))}}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(depName){return function(value){defined[depName]=
value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name];defining[name]=true;main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}return[prefix,name]}function makeRelParts(relName){return relName?splitPrefix(relName):[]}makeMap=function(name,
relParts){var plugin,parts=splitPrefix(name),prefix=parts[0],relResourceName=relParts[1];name=parts[1];if(prefix){prefix=normalize(prefix,relResourceName);plugin=callDep(prefix)}if(prefix)if(plugin&&plugin.normalize)name=plugin.normalize(name,makeNormalize(relResourceName));else name=normalize(name,relResourceName);else{name=normalize(name,relResourceName);parts=splitPrefix(name);prefix=parts[0];name=parts[1];if(prefix)plugin=callDep(prefix)}return{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}};
function makeConfig(name){return function(){return config&&config.config&&config.config[name]||{}}}handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];if(typeof e!=="undefined")return e;else return defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)}}};main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,relParts,args=[],callbackType=typeof callback,usingExports;relName=relName||
name;relParts=makeRelParts(relName);if(callbackType==="undefined"||callbackType==="function"){deps=!deps.length&&callback.length?["require","exports","module"]:deps;for(i=0;i<deps.length;i+=1){map=makeMap(deps[i],relParts);depName=map.f;if(depName==="require")args[i]=handlers.require(name);else if(depName==="exports"){args[i]=handlers.exports(name);usingExports=true}else if(depName==="module")cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,
depName))args[i]=callDep(depName);else if(map.p){map.p.load(map.n,makeRequire(relName,true),makeLoad(depName),{});args[i]=defined[depName]}else throw new Error(name+" missing "+depName);}ret=callback?callback.apply(defined[name],args):undefined;if(name)if(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name])defined[name]=cjsModule.exports;else if(ret!==undef||!usingExports)defined[name]=ret}else if(name)defined[name]=callback};requirejs=require=req=function(deps,callback,relName,
forceSync,alt){if(typeof deps==="string"){if(handlers[deps])return handlers[deps](callback);return callDep(makeMap(deps,makeRelParts(callback)).f)}else if(!deps.splice){config=deps;if(config.deps)req(config.deps,config.callback);if(!callback)return;if(callback.splice){deps=callback;callback=relName;relName=null}else deps=undef}callback=callback||function(){};if(typeof relName==="function"){relName=forceSync;forceSync=alt}if(forceSync)main(undef,deps,callback,relName);else setTimeout(function(){main(undef,
deps,callback,relName)},4);return req};req.config=function(cfg){return req(cfg)};requirejs._defined=defined;define=function(name,deps,callback){if(typeof name!=="string")throw new Error("See almond README: incorrect module build, no module name");if(!deps.splice){callback=deps;deps=[]}if(!hasProp(defined,name)&&!hasProp(waiting,name))waiting[name]=[name,deps,callback]};define.amd={jQuery:true}})();if(window.Inferno){window.React=Inferno;window.React.ON_INPUT="onInput";window.ReactDOM=Inferno}else if(window.preact){window.React=
preact;window.React.ON_INPUT="onInput";window.ReactDOM={render:(component,containerNode,replaceNode)=>preact.render(component,containerNode,replaceNode)._component}}else if(window.React)window.React.ON_INPUT="onChange";else throw new Error("nullcalendar tarvitsee Inferno, preact, tai React'n toimiakseen");window.$el=React.createElement;define("src/Modal",[],()=>{class Modal extends React.Component{constructor(props){super(props);this.state={contentConstruct:null}}open(construct){this.setState({contentConstruct:construct})}close(){this.setState({contentConstruct:null})}render(){return this.state.contentConstruct?
$el("div",{className:"modal"},$el("div",{className:"modal-content"},$el(this.state.contentConstruct.Component,Object.assign({},this.state.contentConstruct.props,{closeModal:()=>this.close()})))):null}}return{default:Modal}});define("src/Constants",[],()=>{return Object.freeze({VIEW_DAY:"day",VIEW_WEEK:"week",VIEW_MONTH:"month",VIEW_DEFAULT:"week",HOURS_IN_DAY:24,DAYS_IN_WEEK:7})});define("src/Toolbar",["src/Constants"],(Constants)=>{const titleFormatters={[Constants.VIEW_DAY]:(dateCursorRange)=>{return"%1, %2".replace("%1",
Intl.DateTimeFormat("fi",{day:"numeric",month:"long"}).format(dateCursorRange.start)).replace("%2",dateCursorRange.start.getFullYear())},[Constants.VIEW_WEEK]:(dateCursorRange)=>{return"%1 %2 - %3 %4".replace("%1",Intl.DateTimeFormat("fi",{month:"short"}).format(dateCursorRange.start)).replace("%2",dateCursorRange.start.getDate()).replace("%3",dateCursorRange.end.getDate()).replace("%4",dateCursorRange.start.getFullYear())},[Constants.VIEW_MONTH]:(dateCursorRange)=>{return Intl.DateTimeFormat("fi",
{month:"long",year:"numeric"}).format(dateCursorRange.start)}};class Toolbar extends React.Component{constructor(props){super(props)}render(){const ctrl=this.props.calendarController;return $el("div",{className:"toolbar"},$el("div",{className:"row"},$el("div",{className:"col"},$el("button",{onClick:()=>ctrl.dateCursor.prev()},"<"),$el("button",{onClick:()=>ctrl.dateCursor.next()},">"),$el("button",{onClick:()=>ctrl.dateCursor.reset()},"T\u00e4n\u00e4\u00e4n")),$el("div",{className:"col"},$el("h2",
null,(this.props.titleFormatter||titleFormatters[ctrl.currentView])(ctrl.dateCursor.range))),$el("div",{className:"col"},$el("button",{onClick:()=>{ctrl.changeView(Constants.VIEW_MONTH)}},"Kuukausi"),$el("button",{onClick:()=>{ctrl.changeView(Constants.VIEW_WEEK)}},"Viikko"),$el("button",{onClick:()=>{ctrl.changeView(Constants.VIEW_DAY)}},"P\u00e4iv\u00e4"))))}}return{default:Toolbar,titleFormatters}});define("src/ContentLayerFactory",[],()=>{class ContentLayerFactory{constructor(){this.registrar=
{}}register(name,clazz){if(this.isRegistered(name))throw new Error(`Layer "${name}" on jo rekister\u00f6ity.`);this.registrar[name]=clazz}isRegistered(name){return this.registrar.hasOwnProperty(name)}make(name,args){if(!this.isRegistered(name))throw new Error(`Layeria "${name}" ei ole rekister\u00f6ity.`);return new this.registrar[name](...args)}}return{default:ContentLayerFactory}});define("src/DateUtils",[],()=>{const EMPTY_WEEK=Array.from(Array(7));class DateUtils{getEstimatedFirstDayOfWeek(){return(new Date(2017,
5,5,12,0,0,0)).getDay()}getStartOfWeek(date){const firstDay=this.getEstimatedFirstDayOfWeek();const d=new Date(date);d.setDate(date.getDate()-(7+date.getDay()-firstDay)%7);return d}getFormattedWeekDays(date,format){const d=this.getStartOfWeek(date);return EMPTY_WEEK.map(()=>{const formatted=format.format(d);d.setDate(d.getDate()+1);return formatted})}getStartOfDay(date){const start=new Date(date);start.setHours(0);start.setMinutes(0);start.setSeconds(0);start.setMilliseconds(1);return start}getEndOfDay(date){const end=
new Date(date);end.setHours(23);end.setMinutes(59);end.setSeconds(59);end.setMilliseconds(999);return end}formatHour(hour){return(hour<10?"0":"")+hour+":00"}format(options,date){return Intl.DateTimeFormat("fi",options).format(date)}}return{default:DateUtils}});define("src/ioc",["src/ContentLayerFactory","src/DateUtils"],(ContentLayerFactory,DateUtils)=>{const cache={};const cachify=(key,fn)=>{if(!cache.hasOwnProperty(key))cache[key]=fn();return cache[key]};return{default:{dateUtils:()=>{return cachify("dateUtils",
()=>new DateUtils.default)},contentLayerFactory:()=>{return cachify("contentLayerFactory",()=>new ContentLayerFactory.default)}}}});define("src/Header",["src/Constants","src/ioc"],(Constants,ioc)=>{const dateUtils=ioc.default.dateUtils();class DayHeader extends React.Component{constructor(props){super(props)}render(){return $el("div",{className:"header"},$el("div",{className:"row"},$el("div",{className:"col"},$el("div",{className:"cell"},"")),$el("div",{className:"col"},$el("div",{className:"cell"},
this.formatDay(this.props.dateCursor.range.start)))))}formatDay(cursorStart){return Intl.DateTimeFormat("fi",{weekday:"long"}).format(cursorStart)}}class WeekHeader extends React.Component{constructor(props){super(props);this.DAYS=dateUtils.getFormattedWeekDays(this.props.dateCursor.range.start,Intl.DateTimeFormat("fi",{weekday:"short"}))}render(){return $el("div",{className:"header"},$el("div",{className:"row"},[""].concat(this.DAYS).map((content)=>$el("div",{key:content,className:"col"},$el("div",
{className:"cell"},content)))))}}class MonthHeader extends React.Component{constructor(props){super(props);this.DAYS=dateUtils.getFormattedWeekDays(this.props.dateCursor.range.start,Intl.DateTimeFormat("fi",{weekday:"long"}))}render(){return $el("div",{className:"header"},$el("div",{className:"row"},this.DAYS.map((weekDay)=>$el("div",{key:weekDay,className:"col"},$el("div",{className:"cell"},weekDay)))))}}return{[Constants.VIEW_DAY]:DayHeader,[Constants.VIEW_WEEK]:WeekHeader,[Constants.VIEW_MONTH]:MonthHeader}});
define("src/Content",["src/Constants","src/ioc"],(Constants,ioc)=>{const HOURS_ARRAY=Array.from(Array(Constants.HOURS_IN_DAY).keys());class Content extends React.Component{constructor(props){super(props);this.state={};const selectedLayers=this.props.calendarController.settings.contentLayers;this.hasAsyncContent=selectedLayers.length>0;if(this.hasAsyncContent){const contentLayerFactory=ioc.default.contentLayerFactory();this.contentLayers=selectedLayers.map((name)=>contentLayerFactory.make(name,[{refresh:()=>
{this.applyAsyncContent();this.forceUpdate()}},this.props.calendarController]));this.loadAsyncContent()}}resetGrid(){return this.props.grid.map((rows)=>rows.map((cell)=>{if(cell&&!(cell instanceof ImmutableCell)){cell.children=[];cell.clickHandlers=[]}}))}componentWillReceiveProps(){if(this.hasAsyncContent){this.setState({loading:true});this.loadAsyncContent()}}loadAsyncContent(){return Promise.all(this.contentLayers.map((l)=>l.load())).then(()=>{this.applyAsyncContent();this.setState({loading:false})})}applyAsyncContent(){this.resetGrid();
this.contentLayers.forEach((layer)=>{this.props.grid.forEach((row)=>{row.forEach((cell)=>{cell instanceof Cell&&layer.decorateCell(cell)})})})}newCell(cell,key){let content;if(!cell)content="";else if(!cell.children||!cell.children.length)content=cell.content;else content=this.newTitledContent(cell);const cellAttrs={className:"cell"};if(cell&&cell.clickHandlers&&cell.clickHandlers.length)cellAttrs.onClick=(e)=>{if(e.which&&e.which!==1)return;cell.clickHandlers.forEach((fn)=>fn(cell,e))};return $el("div",
{className:"col",key},$el("div",cellAttrs,content))}newTitledContent(cell){return $el("div",null,cell.content,cell.children.map((child,i)=>$el(child.Component,Object.assign({},child.props,{key:i}))))}render(){return $el("div",{className:"main"},this.props.grid.map((row,ri)=>$el("div",{className:"row",key:ri},row.map((cell,ci)=>this.newCell(cell,ri+"."+ci)))))}}class Cell{constructor(content,date){this.date=date;this.content=content;this.children=[];this.clickHandlers=[]}}class PlaceholderCell extends Cell{}
class ImmutableCell{constructor(content){this.content=content}}return{default:Content,Cell,ImmutableCell,PlaceholderCell,HOURS_ARRAY}});define("src/ComponentConstruct",[],()=>{class ComponentConstruct{constructor(Component,props){this.Component=Component;this.props=props}}return{default:ComponentConstruct}});define("src/AbstractViewLayout",["src/Header","src/Content","src/ComponentConstruct","src/ioc"],(Header,Content,ComponentConstruct,ioc)=>{class AbstractViewLayout{constructor(dateCursor){this.dateCursor=
dateCursor;this.dateUtils=ioc.default.dateUtils()}getParts(compactFormShouldBeUsed){return!compactFormShouldBeUsed?this.getFullLayout():this.getCompactLayout()}getFullLayout(){return[new ComponentConstruct.default(Header[this.getName()],{dateCursor:this.dateCursor}),new ComponentConstruct.default(Content.default,{gridGeneratorFn:()=>this.generateFullGrid()})]}getCompactLayout(){return[null,new ComponentConstruct.default(Content.default,{gridGeneratorFn:()=>this.generateCompactGrid()})]}}return{default:AbstractViewLayout}});
define("src/DayViewLayout",["src/AbstractViewLayout","src/Content","src/Constants"],(AbstractViewLayout,Content,Constants)=>{class DayViewLayout extends AbstractViewLayout.default{getName(){return Constants.VIEW_DAY}getCompactLayout(){return this.getFullLayout()}generateFullGrid(){const rollingDate=new Date(this.dateCursor.range.start);return Content.HOURS_ARRAY.map((hour)=>{rollingDate.setHours(hour);return[new Content.ImmutableCell(this.dateUtils.formatHour(hour)),new Content.Cell(null,new Date(rollingDate))]})}}
return{default:DayViewLayout}});define("src/WeekViewLayout",["src/AbstractViewLayout","src/Content","src/Constants"],(AbstractViewLayout,Content,Constants)=>{class WeekViewLayout extends AbstractViewLayout.default{getName(){return Constants.VIEW_WEEK}generateFullGrid(){return Content.HOURS_ARRAY.map((hour)=>{const rollingDate=new Date(this.dateCursor.range.start);rollingDate.setHours(hour);const row=[new Content.ImmutableCell(this.dateUtils.formatHour(hour))];while(row.push(new Content.Cell(null,
new Date(rollingDate)))<=Constants.DAYS_IN_WEEK)rollingDate.setDate(rollingDate.getDate()+1);return row})}generateCompactGrid(){const dayNames=this.dateUtils.getFormattedWeekDays(this.dateCursor.range.start,Intl.DateTimeFormat("fi",{weekday:"long"}));const rollingDate=new Date(this.dateCursor.range.start);const getDateAndMoveToNexDay=()=>{const d=new Date(rollingDate);rollingDate.setDate(rollingDate.getDate()+1);return d};return[[new Content.Cell(dayNames[0],getDateAndMoveToNexDay()),new Content.Cell(dayNames[1],
getDateAndMoveToNexDay())],[new Content.Cell(dayNames[2],getDateAndMoveToNexDay()),new Content.Cell(dayNames[3],getDateAndMoveToNexDay())],[new Content.Cell(dayNames[4],getDateAndMoveToNexDay()),new Content.Cell(dayNames[5],getDateAndMoveToNexDay())],[new Content.Cell(dayNames[6],getDateAndMoveToNexDay()),new Content.PlaceholderCell(null,null)]]}}return{default:WeekViewLayout}});define("src/MonthViewLayout",["src/AbstractViewLayout","src/Content","src/Constants"],(AbstractViewLayout,Content,Constants)=>
{class MonthViewLayout extends AbstractViewLayout.default{getName(){return Constants.VIEW_MONTH}generateFullGrid(){return this.generateGrid(Constants.DAYS_IN_WEEK,(d)=>new Content.Cell(d.getDate(),new Date(d)))}generateCompactGrid(){const dayNames=this.dateUtils.getFormattedWeekDays(this.dateCursor.range.start,Intl.DateTimeFormat("fi",{weekday:"short"}));return this.generateGrid(2,(d)=>new Content.Cell(d.getDate()+" "+dayNames[(d.getDay()||7)-1],new Date(d)))}generateGrid(gridWidth,formatFn){const startDate=
this.dateCursor.range.start;const rollingDate=new Date(startDate);const grid=[];let row=[];if(gridWidth===Constants.DAYS_IN_WEEK){row.length=(startDate.getDay()||7)-1;row.fill(undefined)}while(rollingDate.getMonth()===startDate.getMonth()){row.push(formatFn(rollingDate));if(row.length===gridWidth){grid.push(row);row=[]}rollingDate.setDate(rollingDate.getDate()+1)}if(row.length){while(row.push(undefined)<gridWidth);grid.push(row)}return grid}}return{default:MonthViewLayout}});define("src/ViewLayouts",
["src/DayViewLayout","src/WeekViewLayout","src/MonthViewLayout","src/Constants"],(DayViewLayout,WeekViewLayout,MonthViewLayout,Constants)=>{return{[Constants.VIEW_DAY]:DayViewLayout.default,[Constants.VIEW_WEEK]:WeekViewLayout.default,[Constants.VIEW_MONTH]:MonthViewLayout.default}});define("src/DateCursors",["src/Constants","src/ioc"],(Constants,ioc)=>{const dateUtils=ioc.default.dateUtils();class DayViewCursorRange{constructor(currentDate){this.start=dateUtils.getStartOfDay(currentDate);this.end=
dateUtils.getEndOfDay(currentDate)}goForward(){this.start.setDate(this.start.getDate()+1);this.end.setDate(this.end.getDate()+1)}goBackwards(){this.start.setDate(this.start.getDate()-1);this.end.setDate(this.end.getDate()-1)}}class WeekViewCursorRange{constructor(currentDate){this.start=dateUtils.getStartOfWeek(dateUtils.getStartOfDay(currentDate));this.end=dateUtils.getEndOfDay(this.start);this.end.setDate(this.start.getDate()+6)}goForward(){this.start.setDate(this.start.getDate()+Constants.DAYS_IN_WEEK);
this.end.setDate(this.end.getDate()+Constants.DAYS_IN_WEEK)}goBackwards(){this.start.setDate(this.start.getDate()-Constants.DAYS_IN_WEEK);this.end.setDate(this.end.getDate()-Constants.DAYS_IN_WEEK)}}class MonthViewCursorRange{constructor(currentDate){this.start=dateUtils.getStartOfDay(currentDate);this.start.setDate(1);this.end=dateUtils.getEndOfDay(currentDate);this.end.setMonth(this.start.getMonth()+1);this.end.setDate(0)}goForward(){this.start.setMonth(this.start.getMonth()+1);this.start.setDate(1);
this.end.setMonth(this.end.getMonth()+2);this.end.setDate(0)}goBackwards(){this.start.setMonth(this.start.getMonth()-1);this.start.setDate(1);this.end.setDate(0)}}class DateCursor{constructor(range,subsribeFn){this.range=range;if(subsribeFn)this.subscribe(subsribeFn)}subscribe(subscribeFn){this.notify=subscribeFn}next(){this.range.goForward();this.notify("next")}prev(){this.range.goBackwards();this.notify("prev")}reset(){this.range=new this.range.constructor(new Date);this.notify("reset")}goTo(){this.notify("goTo")}}
const cursorRanges={[Constants.VIEW_DAY]:DayViewCursorRange,[Constants.VIEW_WEEK]:WeekViewCursorRange,[Constants.VIEW_MONTH]:MonthViewCursorRange};const dateCursorFactory={newCursor:(viewName,subscriberFn)=>{return new DateCursor(new cursorRanges[viewName](new Date),subscriberFn)}};return{dateCursorFactory}});define("src/settingsFactory",["src/Constants"],(Constants)=>{function getValidViewName(viewNameKey){const lookedUpViewName=Constants["VIEW_"+viewNameKey.toUpperCase()];if(!lookedUpViewName)throw new Error('N\u00e4kym\u00e4\u00e4 "'+
viewNameKey+'" ei l\u00f6ytynyt');return lookedUpViewName}function getValidContentLayers(candidate){if(!candidate)return[];if(!Array.isArray(candidate))throw new Error("contentLayers pit\u00e4isi olla taulukko");return candidate}function getValidTitleFormatters(candidate){if(!candidate)return{};for(const viewNameKey in candidate){if(typeof candidate[viewNameKey]!=="function")throw new Error("titleFormatters["+viewNameKey+"] pit\u00e4isi olla funktio");if(viewNameKey!==Constants.VIEW_DAY&&viewNameKey!==
Constants.VIEW_WEEK&&viewNameKey!==Constants.VIEW_MONTH)throw new Error('"'+viewNameKey+'" ei ole validi n\u00e4kym\u00e4');}return candidate}return{default:function(userSettings){return{defaultView:getValidViewName(userSettings.defaultView||"default"),contentLayers:getValidContentLayers(userSettings.contentLayers),titleFormatters:getValidTitleFormatters(userSettings.titleFormatters)}},getValidViewName}});define("src/CalendarLayout",["src/Modal","src/Toolbar","src/ViewLayouts","src/DateCursors","src/Constants",
"src/settingsFactory"],(Modal,Toolbar,ViewLayouts,DateCursors,Constants,settingsFactory)=>{const smallScreenCondition=window.matchMedia("(max-width:800px)");class CalendarLayout extends React.Component{constructor(props){super(props);this.settings=settingsFactory.default(this.props.settings||{});const state={dateCursor:this.newDateCursor(this.settings.defaultView)};state.currentView=this.settings.defaultView;state.viewLayout=this.newViewLayout(state.currentView,state.dateCursor);state.smallScreenConditionMaches=
smallScreenCondition.matches;this.state=state;this.controller=newController(this)}componentWillMount(){smallScreenCondition.addListener(this.viewPortListener.bind(this))}getController(){return this.controller}changeView(to){const newView=settingsFactory.getValidViewName(to);if(this.state.currentView===newView)return;const state={dateCursor:this.newDateCursor(newView)};state.currentView=newView;state.viewLayout=this.newViewLayout(newView,state.dateCursor);this.setState(state)}viewPortListener(newMatch){const newSmallScreenConditionMaches=
newMatch.matches;if(newSmallScreenConditionMaches!==this.state.smallScreenConditionMaches)this.setState({smallScreenConditionMaches:newSmallScreenConditionMaches})}newDateCursor(viewName){return DateCursors.dateCursorFactory.newCursor(viewName,()=>{this.setState({dateCursor:this.state.dateCursor})})}newViewLayout(viewName,dateCursor){return new ViewLayouts[viewName](dateCursor)}render(){let className="cal "+this.state.currentView;if(this.state.smallScreenConditionMaches&&this.state.currentView!==
Constants.VIEW_DAY)className+="-compact compact";const [header,content]=this.state.viewLayout.getParts(this.state.smallScreenConditionMaches);return $el("div",{className},$el(Modal.default,{ref:(cmp)=>{this.modal=cmp}}),$el(Toolbar.default,{calendarController:this.controller,titleFormatter:this.settings.titleFormatters[this.state.currentView]||null}),header!==null&&$el(header.Component,header.props),$el(content.Component,{grid:content.props.gridGeneratorFn(),calendarController:this.controller}))}}
function newController(component){return{get currentView(){return component.state.currentView},get dateCursor(){return component.state.dateCursor},get settings(){return component.settings},get isCompactViewEnabled(){return component.state.smallScreenConditionMaches},changeView:(to)=>{return component.changeView(to)},openModal:(componentConstruct)=>{component.modal.open(componentConstruct)},closeModal:()=>{component.modal.close()}}}return{default:CalendarLayout}});define("nullcalendar",["src/CalendarLayout",
"src/ioc"],(CalendarLayout,ioc)=>{const contentLayerFactory=ioc.default.contentLayerFactory();return{newCalendar:(el,settings)=>{return ReactDOM.render($el(CalendarLayout.default,settings?{settings}:undefined),el).getController()},registerContentLayer:(name,Class)=>contentLayerFactory.register(name,Class)}});return require("nullcalendar")});
